import sqlite3
from PIL import Image,ImageTk
import cv2
import numpy as np
from tkinter import Tk, Label
t=Tk()

conn = sqlite3.connect('datastorage.db')
print("Opened database successfully");
m,n=0,0

cursor = conn.execute("SELECT * from user_2")
for row in cursor: 
    print("ID = ", row[0])
    #print("img = ", row[1])
    blob_data=row[1]
    nparr  = np.frombuffer(blob_data, np.uint8)
    img_np = cv2.imdecode(nparr, cv2.IMREAD_COLOR)
    image1=cv2.resize(img_np,(130,100))
    #cv2.imshow("data",image1)
    #break
    #Rearrang the color channel
    b,g,r = cv2.split(image1)
    image1 = cv2.merge((r,g,b))
    # Convert the Image object into a TkPhoto object
    im = Image.fromarray(image1)
    imgtk = ImageTk.PhotoImage(image=im) 
    # Put it in the display window
    g=Label(t, image=imgtk)
    g.grid(row=m,column=n)
    g.image = imgtk
    m=m+1
    if(m>4):
        m=0
        n=n+1


print("Operation done successfully");
conn.close()
